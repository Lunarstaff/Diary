### 尝试爬虫爬取今日头条主页新闻列表

- #### 爬虫两个字竟然不会打，这里记录下：
    >- `爬`字的五笔码：`rhyc`
    >- `虫`字的五笔码`jhny`
    >- 爬虫：`rhjh[2]`

- #### [今日头条](https://www.toutiao.com)网址：`https://www.toutiao.com`
    >- 今日头条主页
![](../../resources/image/今日头条-主页-001.png "今日头条主页")
    >- 图中绿框为爬取目标

- #### Python爬虫基本[模板](./worm_toutiao/getHtmlText.py)
    >- 模拟浏览器请求，获取主页资源
    >- 分析获取到的主页资源
    >- 对资源进行分类，归纳，整理，输出   

    使用Python requests获取主页资源时要用get()方法还是post()方法呢？打开浏览器开发工具，刷新一下主页，
    Network -> Header 中可以看到浏览器使用的是get()方法，并且可以看到报文头：
    ```
    :authority: www.toutiao.com
    :method: GET
    :path: /
    :scheme: https
    accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3
    accept-encoding: gzip, deflate, br
    accept-language: zh-CN,zh;q=0.9,en;q=0.8
    cache-control: max-age=0
    cookie: tt_webid=6746949881817204231; WEATHER_CITY=%E5%8C%97%E4%BA%AC; __tasessionId=u5qul777w1570896694672; s_v_web_id=d14c73fe8a65f649dca06d4cec0b43f2; tt_webid=6746949881817204231; csrftoken=6b6595d51d9590aaea31cf6eb0b9c8a9; uuid="w:f214633e4a9a48daa29e1358917a5daf"
    sec-fetch-mode: navigate
    sec-fetch-site: none
    sec-fetch-user: ?1
    upgrade-insecure-requests: 1
    user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36
    ```
    ![](../../resources/image/今日头条-主页-002.png "今日头条主页")
    
    通过上面的浏览器RequestHeader组装PythonRequests中get()方法用的报文头：
    ```python
    headers = {
        "Accept": "text/html,application/xhtml+xml,application/xml;"
                  "q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3",
        "Accept-Language": "zh-CN,zh;q=0.9,en;q=0.8",
        "Cache-Control": "max-age=0",
        "Connection": "keep-alive",
        "Cookie": "tt_webid=6746949881817204231;"
                  "WEATHER_CITY=%E5%8C%97%E4%BA%AC;"
                  "tasessionId=u5qul777w1570896694672;"
                  "s_v_web_id=d14c73fe8a65f649dca06d4cec0b43f2;"
                  "tt_webid=6746949881817204231;"
                  "csrftoken=6b6595d51d9590aaea31cf6eb0b9c8a9;"
                  "uuid='w:f214633e4a9a48daa29e1358917a5daf'",
        "Host": "www.toutiao.com",
        "Upgrade-Insecure-Requests": "1",
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) "
                      "AppleWebKit/537.36 (KHTML, like Gecko) "
                      "Chrome/77.0.3865.90 "
                      "Safari/537.36",
    }
    ```
    使用request中的get()方法尝试请求，并打印一下响应：
    ```python
    # getHtmlText.py
    import requests
    
    
    target_url = 'https://www.toutiao.com'
    
    headers = {
        "Accept": "text/html,application/xhtml+xml,application/xml;"
                  "q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3",
        "Accept-Language": "zh-CN,zh;q=0.9,en;q=0.8",
        "Cache-Control": "max-age=0",
        "Connection": "keep-alive",
        "Cookie": "tt_webid=6746949881817204231;"
                  "WEATHER_CITY=%E5%8C%97%E4%BA%AC;"
                  "tasessionId=u5qul777w1570896694672;"
                  "s_v_web_id=d14c73fe8a65f649dca06d4cec0b43f2;"
                  "tt_webid=6746949881817204231;"
                  "csrftoken=6b6595d51d9590aaea31cf6eb0b9c8a9;"
                  "uuid='w:f214633e4a9a48daa29e1358917a5daf'",
        "Host": "www.toutiao.com",
        "Upgrade-Insecure-Requests": "1",
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) "
                      "AppleWebKit/537.36 (KHTML, like Gecko) "
                      "Chrome/77.0.3865.90 "
                      "Safari/537.36",
    }
    
    
    if __name__ == "__main__":
        r = requests.get(url=target_url, headers=headers)
        print("响应状态码为：{}".format(r.status_code))
        print("响应的页面前1000个字符为：{}".format(r.text[:1000]))

    ```
    执行后输出为（为了便于展示，我手动给换行了）：
    ```
    响应状态码为：200
    响应的页面前1000个字符为：<!DOCTYPE html><html><head><meta charset=utf-8><title>今日头条</title>
    <meta http-equiv=x-dns-prefetch-control content=on><meta name=renderer content=webkit>
    <link rel=dns-prefetch href=//s3.pstatp.com/ ><link rel=dns-prefetch href=//s3a.pstatp.com/ >
    <link rel=dns-prefetch href=//s3b.pstatp.com><link rel=dns-prefetch href=//p1.pstatp.com/ >
    <link rel=dns-prefetch href=//p3.pstatp.com/ >
    <meta http-equiv=Content-Security-Policy content=upgrade-insecure-requests>
    <meta http-equiv=Content-Type content="text/html; charset=utf-8">
    <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1">
    <meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui">
    <meta name=360-site-verification content=b96e1758dfc9156a410a4fb9520c5956>
    <meta name=360_ssp_verify content=2ae4ad39552c45425bddb738efda3dbb>
    <meta name=google-site-verification content=3PYTTW0s7IAfkReV8wAECfjIdKY-bQeSkVTyJNZpBKE>
    <meta name=shenma-site-verification content=34c05607e2a9430ad424
    
    Process finished with exit code 0
    ```



